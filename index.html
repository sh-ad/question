<!doctype html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —ç–∫–∑–∞–º–µ–Ω–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –±–∏–ª–µ—Ç–∞ –ø–æ Database Internals</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      color-scheme: dark;
      --bg: #030712;
      --bg-elevated: rgba(10, 14, 30, 0.78);
      --bg-card: rgba(13, 18, 35, 0.86);
      --border-subtle: rgba(120, 156, 255, 0.18);
      --border-strong: rgba(255, 255, 255, 0.08);
      --accent: #6dd3ff;
      --accent-2: #7c3aed;
      --accent-3: #22d3ee;
      --accent-alt: #fbbf24;
      --glow: rgba(109, 211, 255, 0.35);
      --text-main: #eef2ff;
      --text-muted: #c7d2fe;
      --text-soft: #9ca3af;
      --shadow-strong: 0 24px 80px rgba(0, 0, 0, 0.55), 0 0 0 1px rgba(255, 255, 255, 0.04);
    }

    * {
      box-sizing: border-box;
    }

    @font-face {
      font-family: "Space Grotesk";
      src: url("./fonts/SpaceGrotesk-Regular.ttf") format("truetype");
      font-weight: 400;
      font-style: normal;
      font-display: swap;
    }

    @font-face {
      font-family: "Space Grotesk";
      src: url("./fonts/SpaceGrotesk-Medium.ttf") format("truetype");
      font-weight: 500;
      font-style: normal;
      font-display: swap;
    }

    @font-face {
      font-family: "Space Grotesk";
      src: url("./fonts/SpaceGrotesk-SemiBold.ttf") format("truetype");
      font-weight: 600;
      font-style: normal;
      font-display: swap;
    }

    @font-face {
      font-family: "Space Grotesk";
      src: url("./fonts/SpaceGrotesk-Bold.ttf") format("truetype");
      font-weight: 700;
      font-style: normal;
      font-display: swap;
    }

    @font-face {
      font-family: "Manrope";
      src: url("./fonts/Manrope-Regular.ttf") format("truetype");
      font-weight: 400;
      font-style: normal;
      font-display: swap;
    }

    @font-face {
      font-family: "Manrope";
      src: url("./fonts/Manrope-Medium.ttf") format("truetype");
      font-weight: 500;
      font-style: normal;
      font-display: swap;
    }

    @font-face {
      font-family: "Manrope";
      src: url("./fonts/Manrope-SemiBold.ttf") format("truetype");
      font-weight: 600;
      font-style: normal;
      font-display: swap;
    }

    body {
      margin: 0;
      font-family: "Space Grotesk", "Manrope", "DM Sans", "SF Pro Display", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI";
      background: radial-gradient(circle at 20% 20%, rgba(109, 211, 255, 0.08), transparent 30%),
        radial-gradient(circle at 80% 0%, rgba(124, 58, 237, 0.12), transparent 40%),
        radial-gradient(circle at 60% 80%, rgba(34, 211, 238, 0.12), transparent 35%),
        #01030a;
      color: var(--text-main);
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 22px 18px 26px;
      position: relative;
      overflow-x: hidden;
    }

    body::before {
      content: "";
      position: fixed;
      inset: -30%;
      background:
        radial-gradient(circle at 30% 30%, rgba(109, 211, 255, 0.12), transparent 40%),
        radial-gradient(circle at 80% 20%, rgba(124, 58, 237, 0.12), transparent 35%),
        radial-gradient(circle at 20% 70%, rgba(34, 211, 238, 0.12), transparent 35%);
      filter: blur(40px);
      opacity: 0.9;
      z-index: -2;
    }

    body::after {
      content: "";
      position: fixed;
      inset: 0;
      background: linear-gradient(120deg, rgba(255, 255, 255, 0.04), rgba(255, 255, 255, 0));
      mix-blend-mode: screen;
      pointer-events: none;
      z-index: -1;
    }

    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.04);
    }

    ::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, #6dd3ff, #7c3aed);
      border-radius: 999px;
    }

    .app {
      max-width: 1100px;
      width: 100%;
      background: linear-gradient(135deg, rgba(13, 18, 35, 0.9), rgba(7, 12, 24, 0.9));
      border-radius: 20px;
      padding: 26px 22px 30px;
      box-shadow: var(--shadow-strong), 0 0 80px rgba(109, 211, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.06);
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(10px);
    }

    .app::before {
      content: "";
      position: absolute;
      inset: -50%;
      background:
        radial-gradient(circle at 10% 10%, rgba(109, 211, 255, 0.25), transparent 50%),
        radial-gradient(circle at 90% 20%, rgba(124, 58, 237, 0.25), transparent 50%),
        radial-gradient(circle at 40% 80%, rgba(34, 211, 238, 0.25), transparent 50%);
      opacity: 0.5;
      pointer-events: none;
      z-index: -2;
      filter: blur(40px);
    }

    .app::after {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(160deg, rgba(255, 255, 255, 0.06), transparent 35%);
      opacity: 0.7;
      pointer-events: none;
      z-index: -1;
    }

    h1 {
      margin: 0 0 6px;
      font-size: 26px;
      font-weight: 700;
      letter-spacing: 0.02em;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .title-pill {
      font-size: 11px;
      padding: 3px 10px;
      border-radius: 999px;
      background: linear-gradient(120deg, rgba(109, 211, 255, 0.18), rgba(124, 58, 237, 0.26));
      border: 1px solid rgba(255, 255, 255, 0.14);
      color: #e0e7ff;
      text-transform: uppercase;
      letter-spacing: 0.2em;
    }

    .subtitle {
      margin-bottom: 16px;
      font-size: 15px;
      color: var(--text-muted);
      max-width: 720px;
      line-height: 1.6;
    }

    .badges {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 16px;
      font-size: 11px;
    }

    .badge {
      border-radius: 999px;
      padding: 5px 12px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.06), rgba(255, 255, 255, 0.02));
      color: var(--text-main);
      display: inline-flex;
      align-items: center;
      gap: 4px;
      white-space: nowrap;
    }

    .badge-label {
      text-transform: uppercase;
      letter-spacing: 0.12em;
      font-size: 10px;
    }

    .badge strong {
      color: var(--text-main);
      font-weight: 600;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 10px 12px;
      align-items: center;
      margin-bottom: 18px;
    }

    .controls-main {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      flex: 1 1 auto;
      min-width: 220px;
    }

    .controls-secondary {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
      font-size: 12px;
      color: var(--text-soft);
    }

    button {
      border: none;
      outline: none;
      cursor: pointer;
      border-radius: 999px;
      padding: 12px 20px;
      font-size: 14px;
      font-weight: 700;
      letter-spacing: 0.02em;
      background: linear-gradient(135deg, #6dd3ff, #7c3aed);
      color: #041018;
      box-shadow: 0 16px 40px rgba(109, 211, 255, 0.4);
      transition:
        transform 0.12s ease-out,
        box-shadow 0.12s ease-out,
        background 0.12s ease-out,
        filter 0.12s ease-out;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      white-space: nowrap;
    }

    button:hover {
      transform: translateY(-1px);
      box-shadow: 0 18px 50px rgba(124, 58, 237, 0.48);
      background: linear-gradient(135deg, #7c3aed, #6dd3ff);
      filter: brightness(1.05);
    }

    button:active {
      transform: translateY(0);
      box-shadow: 0 10px 24px rgba(109, 211, 255, 0.4);
    }

    .btn-secondary {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
      color: var(--text-main);
      box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.08);
      font-weight: 600;
      padding-inline: 16px;
    }

    .btn-secondary:hover {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.06));
      box-shadow: 0 8px 28px rgba(124, 58, 237, 0.35);
      filter: none;
    }

    .btn-ghost {
      background: rgba(255, 255, 255, 0.04);
      color: var(--text-soft);
      box-shadow: none;
      border-radius: 12px;
      padding: 10px 12px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      font-size: 13px;
      font-weight: 600;
    }

    .btn-ghost:hover {
      background: rgba(255, 255, 255, 0.08);
      color: var(--text-main);
      box-shadow: 0 12px 24px rgba(109, 211, 255, 0.25);
    }

    .btn-icon {
      font-size: 16px;
      line-height: 1;
    }

    .control-inline {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 12px;
      color: var(--text-main);
      padding: 8px 10px;
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      background: linear-gradient(120deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
      white-space: nowrap;
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.25);
    }

    .control-inline span {
      white-space: nowrap;
    }

    input[type="text"] {
      border-radius: 999px;
      border: 1px solid rgba(75, 85, 99, 0.9);
      background: rgba(255, 255, 255, 0.04);
      color: var(--text-main);
      font-size: 12px;
      padding: 7px 12px;
      outline: none;
      min-width: 160px;
    }

    input[type="text"]:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(109, 211, 255, 0.35);
    }

    .range-wrapper {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      min-width: 180px;
    }

    input[type="range"] {
      appearance: none;
      -webkit-appearance: none;
      width: 90px;
      height: 4px;
      border-radius: 999px;
      background: #111827;
      outline: none;
      cursor: pointer;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background: linear-gradient(135deg, #6dd3ff, #7c3aed);
      box-shadow: 0 0 0 2px #041018, 0 0 0 6px rgba(109, 211, 255, 0.25);
      border: none;
      margin-top: -5px;
    }

    input[type="range"]::-moz-range-thumb {
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background: linear-gradient(135deg, #6dd3ff, #7c3aed);
      border: none;
      box-shadow: 0 0 0 2px #041018, 0 0 0 6px rgba(109, 211, 255, 0.25);
    }

    input[type="range"]::-webkit-slider-runnable-track {
      height: 4px;
      border-radius: 999px;
      background: #111827;
    }

    input[type="range"]::-moz-range-track {
      height: 4px;
      border-radius: 999px;
      background: #111827;
    }

    .range-value {
      font-variant-numeric: tabular-nums;
      color: var(--text-muted);
    }

    .ticket-meta {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 4px;
    }

    .ticket-meta span {
      opacity: 0.9;
    }

    #ticketContainer {
      margin-top: 18px;
      min-height: 80px;
    }

    .blocks {
      margin-top: 2px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 14px;
      animation: fadeInUp 0.22s ease-out;
    }

    .block-card {
      background: linear-gradient(140deg, rgba(255, 255, 255, 0.03), rgba(255, 255, 255, 0.02));
      border-radius: 16px;
      padding: 16px 16px 14px;
      border: 1px solid rgba(255, 255, 255, 0.06);
      box-shadow: 0 14px 32px rgba(0, 0, 0, 0.5), 0 0 40px rgba(109, 211, 255, 0.08);
      position: relative;
      overflow: hidden;
      transform-origin: top left;
      animation: cardPopIn 0.25s ease-out;
      backdrop-filter: blur(6px);
    }

    .block-card::before {
      content: "";
      position: absolute;
      inset: -35%;
      background:
        radial-gradient(circle at 0% 0%, rgba(109, 211, 255, 0.3), transparent 55%),
        radial-gradient(circle at 100% 0%, rgba(124, 58, 237, 0.25), transparent 60%),
        radial-gradient(circle at 40% 90%, rgba(34, 211, 238, 0.2), transparent 55%);
      opacity: 0.4;
      pointer-events: none;
      mix-blend-mode: screen;
    }

    .block-inner {
      position: relative;
      z-index: 1;
    }

    .block-title-row {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 10px;
      margin-bottom: 4px;
    }

    .block-title {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-main);
    }

    .block-tag {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      background: rgba(109, 211, 255, 0.16);
      color: #bde5ff;
    }

    .block-tag-badge {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: var(--accent);
      box-shadow: 0 0 0 3px rgba(109, 211, 255, 0.2);
    }

    .block-subtitle {
      font-size: 11px;
      color: var(--text-soft);
      text-transform: uppercase;
      letter-spacing: 0.16em;
      margin-bottom: 6px;
    }

    .question-text {
      font-size: 13px;
      line-height: 1.45;
      color: #e5e7eb;
    }

    .question-number {
      font-weight: 600;
      color: #a5b4fc;
      margin-right: 4px;
    }

    .empty-state {
      margin-top: 8px;
      font-size: 14px;
      color: var(--text-muted);
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px dashed var(--border-subtle);
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.03), rgba(255, 255, 255, 0.015));
    }

    .hint {
      margin-top: 10px;
      font-size: 12px;
      color: var(--text-soft);
    }

    .hint strong {
      color: #c7d2fe;
    }

    .history {
      margin-top: 18px;
      padding-top: 12px;
      border-top: 1px solid var(--border-subtle);
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0));
      border-radius: 14px;
      padding: 12px;
    }

    .history-title {
      font-size: 11px;
      color: var(--text-soft);
      text-transform: uppercase;
      letter-spacing: 0.16em;
      margin-bottom: 6px;
    }

    .history-empty {
      font-size: 12px;
      color: var(--text-soft);
    }

    .history-list {
      display: flex;
      flex-direction: column;
      gap: 6px;
      font-size: 12px;
      max-height: 240px;
      overflow-y: auto;
      padding-right: 2px;
    }

    .history-item {
      padding: 6px 8px;
      border-radius: 10px;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.03), rgba(255, 255, 255, 0.02));
      border: 1px solid rgba(255, 255, 255, 0.06);
      box-shadow: 0 12px 26px rgba(0, 0, 0, 0.25);
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .history-item-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
      flex-wrap: wrap;
    }

    .history-item-title {
      font-weight: 600;
      color: var(--text-main);
    }

    .history-item-time {
      color: var(--text-muted);
    }

    .history-item-mode {
      color: #a5b4fc;
      font-size: 11px;
    }

    .history-item-blocks {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
    }

    .history-pill {
      border-radius: 999px;
      padding: 2px 7px;
      background: rgba(15, 118, 110, 0.18);
      color: #67e8f9;
    }

    .history-item-name {
      color: #c7d2fe;
      font-weight: 600;
    }

    .history-rename-btn {
      border: 1px solid var(--border-subtle);
      background: rgba(15, 23, 42, 0.7);
      color: var(--text-soft);
      border-radius: 8px;
      padding: 4px 8px;
      font-size: 11px;
      cursor: pointer;
      transition: background 0.12s ease-out, color 0.12s ease-out, border-color 0.12s ease-out;
    }

    .history-rename-btn:hover {
      background: rgba(109, 211, 255, 0.12);
      color: var(--text-main);
      border-color: rgba(109, 211, 255, 0.5);
    }

    .all-questions {
      margin-top: 16px;
      padding: 10px 10px 8px;
      border-radius: 12px;
      border: 1px solid var(--border-subtle);
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.01));
      font-size: 13px;
      color: var(--text-muted);
    }

    .all-questions summary {
      list-style: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      outline: none;
    }

    .all-questions summary::-webkit-details-marker {
      display: none;
    }

    .all-questions-toggle {
      font-weight: 500;
      color: var(--text-main);
    }

    .all-questions-arrow {
      font-size: 14px;
      opacity: 0.7;
      transition: transform 0.15s ease-out;
    }

    .all-questions[open] .all-questions-arrow {
      transform: rotate(90deg);
    }

    .all-questions-content {
      margin-top: 8px;
      max-height: 260px;
      overflow: auto;
      padding-right: 2px;
    }

    .all-questions-block {
      margin-top: 6px;
      padding-top: 6px;
      border-top: 1px dashed rgba(55, 65, 81, 0.8);
    }

    .all-questions-block:first-child {
      border-top: none;
      padding-top: 0;
      margin-top: 4px;
    }

    .all-questions-block-title {
      font-weight: 600;
      margin-bottom: 4px;
      font-size: 13px;
      color: var(--text-main);
    }

    .all-questions-list {
      margin: 0;
      padding-left: 18px;
    }

    .all-questions-list li {
      margin-bottom: 2px;
      line-height: 1.4;
    }

    .question-number-tag {
      color: #a5b4fc;
      font-weight: 500;
      margin-right: 4px;
    }

    /* –†—É–ª–µ—Ç–∫–∞ */

    .roulette-overlay {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at 30% 30%, rgba(109, 211, 255, 0.08), transparent 40%),
        radial-gradient(circle at 70% 20%, rgba(124, 58, 237, 0.12), transparent 45%),
        rgba(4, 6, 14, 0.82);
      backdrop-filter: blur(16px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 40;
      padding: 16px;
      animation: overlayFadeIn 0.18s ease-out;
    }

    .roulette-overlay-fade-out {
      animation: overlayFadeOut 0.16s ease-in forwards;
    }

    .roulette-panel {
      max-width: 960px;
      width: 100%;
      background: linear-gradient(135deg, rgba(13, 18, 35, 0.9), rgba(7, 12, 24, 0.92));
      border-radius: 18px;
      padding: 16px 16px 14px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow:
        0 24px 70px rgba(0, 0, 0, 0.8),
        0 0 0 1px rgba(109, 211, 255, 0.08);
      display: flex;
      flex-direction: column;
      gap: 10px;
      backdrop-filter: blur(10px);
    }

    .roulette-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 12px;
      flex-wrap: wrap;
    }

    .roulette-title {
      font-size: 15px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .roulette-title span {
      font-size: 18px;
    }

    .roulette-subtitle {
      font-size: 12px;
      color: var(--text-soft);
      margin-top: 2px;
    }

    .roulette-subtitle strong {
      color: #c7d2fe;
    }

    .roulette-progress {
      min-width: 170px;
    }

    .progress-label {
      font-size: 11px;
      color: var(--text-soft);
      margin-bottom: 3px;
      display: flex;
      justify-content: space-between;
      gap: 8px;
      align-items: baseline;
    }

    .progress-label span {
      font-variant-numeric: tabular-nums;
    }

    .progress-bar {
      position: relative;
      width: 100%;
      height: 5px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.04);
      overflow: hidden;
      box-shadow: 0 0 0 1px rgba(30, 64, 175, 0.5);
    }

    .progress-inner {
      position: absolute;
      inset: 0;
      border-radius: inherit;
      background: linear-gradient(90deg, var(--accent), var(--accent-alt));
      transform-origin: left center;
      transform: scaleX(1);
      transition: transform 0.04s linear;
    }

    .roulette-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 8px;
      max-height: 320px;
      overflow-y: auto;
      overflow-x: hidden;
      margin-top: 6px;
      padding-right: 2px;
    }

    .mini-ticket {
      min-width: 0;
      border-radius: 10px;
      padding: 8px 7px;
      border: 1px solid rgba(255, 255, 255, 0.06);
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.03), rgba(255, 255, 255, 0.01));
      font-size: 11px;
      color: var(--text-muted);
      opacity: 0.75;
      transform: translateY(0);
      transition:
        background 0.12s ease-out,
        border-color 0.12s ease-out,
        box-shadow 0.12s ease-out,
        transform 0.12s ease-out,
        opacity 0.12s ease-out;
    }

    .mini-ticket-title {
      font-weight: 600;
      color: var(--text-main);
      margin-bottom: 2px;
      font-size: 11px;
    }

    .mini-ticket-blocks {
      color: #a5b4fc;
      margin-bottom: 1px;
    }

    .mini-ticket-questions {
      font-size: 11px;
      color: var(--text-muted);
    }

    .mini-ticket.is-hot {
      border-color: rgba(109, 211, 255, 0.7);
      background: radial-gradient(circle at top left, rgba(109, 211, 255, 0.18), rgba(124, 58, 237, 0.08));
      box-shadow:
        0 0 0 1px rgba(109, 211, 255, 0.65),
        0 12px 30px rgba(124, 58, 237, 0.35);
      transform: translateY(-1px) scale(1.02);
      opacity: 1;
    }

    .roulette-actions {
      display: flex;
      justify-content: space-between;
      margin-top: 6px;
      gap: 8px;
      flex-wrap: wrap;
    }

    .roulette-actions-right {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .roulette-hint {
      font-size: 11px;
      color: var(--text-soft);
      max-width: 360px;
    }

    .roulette-stage-label {
      font-size: 12px;
      color: var(--text-soft);
      margin: -2px 0 2px;
    }

    .roulette-picked {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      font-size: 11px;
      color: var(--text-soft);
      min-height: 12px;
    }

    .roulette-picked-pill {
      border-radius: 999px;
      padding: 3px 8px;
      background: rgba(109, 211, 255, 0.12);
      border: 1px solid rgba(109, 211, 255, 0.35);
      color: #dbeafe;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .roulette-picked-pill strong {
      color: #c7d2fe;
      font-weight: 600;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(10px) scale(0.98);
      }

      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    @keyframes cardPopIn {
      from {
        opacity: 0;
        transform: translateY(10px) scale(0.97);
      }

      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    @keyframes overlayFadeIn {
      from {
        opacity: 0;
        transform: scale(1.02);
      }

      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    @keyframes overlayFadeOut {
      from {
        opacity: 1;
        transform: scale(1);
      }

      to {
        opacity: 0;
        transform: scale(1.02);
      }
    }

    @media (max-width: 700px) {
      .app {
        padding: 18px 12px 22px;
        border-radius: 14px;
      }

      h1 {
        font-size: 20px;
        flex-direction: column;
        align-items: flex-start;
      }

      .controls {
        flex-direction: column;
        align-items: flex-start;
      }

      .controls-secondary {
        width: 100%;
        justify-content: space-between;
      }

      .control-inline {
        width: 100%;
        justify-content: space-between;
      }

      .range-wrapper {
        width: 100%;
      }

      .roulette-panel {
        padding: 14px 10px 12px;
      }

      .roulette-grid {
        max-height: 320px;
      }
    }
  </style>
</head>

<body>
  <div class="app">
    <h1>
      –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –±–∏–ª–µ—Ç–∞ –ø–æ Database Internals
      <span class="title-pill">exam mode</span>
    </h1>

    <div class="subtitle">
      –ù–∞–∂–º–∏ ¬´–ó–∞–ø—É—Å—Ç–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é¬ª, —á—Ç–æ–±—ã —Å–ª—É—á–∞–π–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –±–∏–ª–µ—Ç –∏–∑ 3 —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –±–ª–æ–∫–æ–≤ –∏ 3 –≤–æ–ø—Ä–æ—Å–æ–≤:
      —Ö—Ä–∞–Ω–µ–Ω–∏–µ/—Å—Ç—Ä–∞–Ω–∏—Ü—ã, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –∏–Ω–¥–µ–∫—Å—ã, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.
    </div>

    <div class="badges" id="statsBadges"></div>

    <div class="controls">
      <div class="controls-main">
        <button id="generateBtn">
          <span class="btn-icon">üé≤</span>
          <span>–ó–∞–ø—É—Å—Ç–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é</span>
        </button>

        <div class="control-inline">
          <span>–ù–∞–∑–≤–∞–Ω–∏–µ</span>
          <input type="text" id="ticketNameInput" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä, –ò–≤–∞–Ω–æ–≤" maxlength="80">
        </div>
      </div>

      <div class="controls-secondary">
        <div class="control-inline" id="durationControl">
          <span>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä—É–ª–µ—Ç–∫–∏</span>
          <div class="range-wrapper">
            <input type="range" id="durationRange" min="2" max="10" step="1" value="5">
            <span class="range-value"><span id="durationLabel">5</span> —Å</span>
          </div>
        </div>
        <button class="btn-secondary" id="instantBtn" title="–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ —Ä—É–ª–µ—Ç–∫–∏">
          <span class="btn-icon">‚ö°</span>
          –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ
        </button>
      </div>
    </div>

    <div class="ticket-meta" id="ticketMeta">
      <span>–ë–∏–ª–µ—Ç –µ—â—ë –Ω–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω. –ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –≤—ã—à–µ.</span>
    </div>

    <div id="ticketContainer">
      <div class="empty-state">
        –ó–¥–µ—Å—å –ø–æ—è–≤—è—Ç—Å—è –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –±–ª–æ–∫–∏ –∏ –≤–æ–ø—Ä–æ—Å—ã. –ö–∞–∂–¥—ã–π –±–∏–ª–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç 3 –±–ª–æ–∫–∞ –∏ 3 –≤–æ–ø—Ä–æ—Å–∞.
      </div>
    </div>

    <div class="hint">
      –ù—É–º–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ –≤–∏–¥–∞ <strong>X.Y</strong> —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ç–µ–º–æ–π –∏ –Ω–æ–º–µ—Ä–æ–º –≤–æ–ø—Ä–æ—Å–∞
      –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —ç–∫–∑–∞–º–µ–Ω–∞ –≤ –≤–∏–∫–∏ (X ‚Äî –Ω–æ–º–µ—Ä —Ç–µ–º—ã, Y ‚Äî –Ω–æ–º–µ—Ä –≤–æ–ø—Ä–æ—Å–∞).
    </div>

    <div class="history">
      <div class="history-title">–ò—Å—Ç–æ—Ä–∏—è –±–∏–ª–µ—Ç–æ–≤ –∑–∞ —ç—Ç—É —Å–µ—Å—Å–∏—é</div>
      <div class="history-empty" id="historyEmpty">
        –ü–æ–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–ø–∞–ª–æ ‚Äî –ø–µ—Ä–≤—ã–π –±–∏–ª–µ—Ç —Å—Ç–∞–Ω–µ—Ç #1.
      </div>
      <div class="history-list" id="historyList"></div>
    </div>

    <details class="all-questions">
      <summary>
        <span class="all-questions-toggle">–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –±–ª–æ–∫–∏ –∏ –≤–æ–ø—Ä–æ—Å—ã</span>
        <span class="all-questions-arrow">‚ñ∂</span>
      </summary>
      <div class="all-questions-content" id="allQuestionsContent"></div>
    </details>
  </div>

  <script>
    // –û–ø–∏—Å–∞–Ω–∏–µ –±–ª–æ–∫–æ–≤ –∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è Database Internals
    // –ù—É–º–µ—Ä–∞—Ü–∏—è X.Y: X ‚Äî —Ç–µ–º–∞, Y ‚Äî –Ω–æ–º–µ—Ä –≤–æ–ø—Ä–æ—Å–∞ –≤ —Ç–µ–º–µ

    const blocks = [
      {
        id: "A",
        name: "–ë–ª–æ–∫ A ‚Äî –°—Ç—Ä–∞–Ω–∏—Ü–∞, –±—É—Ñ–µ—Ä–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä, –∫–∞—Ç–∞–ª–æ–≥–∏ (–¢–µ–º—ã 1‚Äì3)",
        questions: [
          // –¢–µ–º–∞ 1. Architecture. Page layout
          { number: "1.1", text: "SQL-–∑–∞–ø—Ä–æ—Å: –ø—É—Ç—å —á–µ—Ä–µ–∑ —É—Ä–æ–≤–Ω–∏ –°–£–ë–î –æ—Ç —Å—Ç—Ä–æ–∫–∏ –¥–æ —á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Å –¥–∏—Å–∫–∞." },
          { number: "1.2", text: "–ó–∞—á–µ–º –°–£–ë–î –≤–≤–æ–¥–∏—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (8/16 –ö–ë) –ø–æ–≤–µ—Ä—Ö –±–ª–æ–∫–æ–≤ –û–°?" },
          { number: "1.3", text: "–ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã lower/upper/slotCount –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ. –ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ lower > upper?" },
          { number: "1.4", text: "–†–æ–ª—å –º–∞—Å—Å–∏–≤–∞ —Å–ª–æ—Ç–æ–≤. –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å tuple –ø—Ä–∏ soft delete –∏ –ø–æ—á–µ–º—É –Ω–µ —É–¥–∞–ª—è–µ–º —Å—Ä–∞–∑—É?" },
          { number: "1.5", text: "–ó–∞—á–µ–º –Ω—É–∂–µ–Ω nullmask –≤–Ω—É—Ç—Ä–∏ tuple? –†–∞–∑–Ω–∏—Ü–∞ NULL –∏ \"\" –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ö—Ä–∞–Ω–µ–Ω–∏—è." },

          // –¢–µ–º–∞ 2. Shared buffers / Buffer Manager
          { number: "2.1", text: "–ó–∞—á–µ–º –≤ –°–£–ë–î –Ω—É–∂–µ–Ω –±—É—Ñ–µ—Ä–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –≤–æ–æ–±—â–µ?" },
          { number: "2.2", text: "–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–µ: cache hit vs cache miss?" },
          { number: "2.3", text: "–ß—Ç–æ —Ç–∞–∫–æ–µ Buffer Pool –∏ –∫–∞–∫–∏–µ —Ç—Ä–∏ –∫–ª—é—á–µ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –æ–Ω –≤–∫–ª—é—á–∞–µ—Ç –≤ PostgreSQL?" },
          { number: "2.4", text: "–°—Ä–∞–≤–Ω–µ–Ω–∏–µ FIFO, LRU –∏ Clock: –∏–¥–µ—è, —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, –ø—Ä–∞–∫—Ç–∏–∫–∞." },
          { number: "2.5", text: "Clock-sweep –≤ PostgreSQL: usage_count –∏ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–±–æ—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞ –≤—ã—Ç–µ—Å–Ω–µ–Ω–∏–µ." },
          { number: "2.6", text: "–ß—Ç–æ —Ç–∞–∫–æ–µ dirty-—Å—Ç—Ä–∞–Ω–∏—Ü–∞, –∫–æ–≥–¥–∞ –æ–Ω–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∏ –ø–æ—á–µ–º—É –Ω–µ –ø–∏—à–µ—Ç—Å—è –Ω–∞ –¥–∏—Å–∫ —Å—Ä–∞–∑—É?" },
          { number: "2.7", text: "–†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É Background Writer –∏ Checkpointer –≤ PostgreSQL –∏ –∏—Ö –∑–∞–¥–∞—á–∏." },

          // –¢–µ–º–∞ 3. Catalog Management
          { number: "3.1", text: "–ß—Ç–æ —Ç–∞–∫–æ–µ –º–µ–Ω–µ–¥–∂–µ—Ä –∫–∞—Ç–∞–ª–æ–≥–æ–≤ –∏ –∑–æ–Ω–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ Catalog Manager?" },
          { number: "3.2", text: "–ó–∞—á–µ–º –Ω—É–∂–Ω—ã —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∫–∞—Ç–∞–ª–æ–≥–∏ –∏ –ø–æ—á–µ–º—É –ë–î –Ω–∞–∑—ã–≤–∞—é—Ç —Å–∞–º–æ–æ–ø–∏—Å—ã–≤–∞—é—â–µ–π—Å—è?" },
          { number: "3.3", text: "–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∫–∞—Ç–∞–ª–æ–≥–∞—Ö: —Å—Ö–µ–º—ã, —Ç–∞–±–ª–∏—Ü—ã, —Å—Ç–æ–ª–±—Ü—ã, —Ç–∏–ø—ã." },
          { number: "3.4", text: "–ß—Ç–æ —Ö—Ä–∞–Ω–∏—Ç –∫–∞—Ç–∞–ª–æ–≥ —Ç–∞–±–ª–∏—Ü (pg_class) –∏ –∫–∞–∫ –æ–Ω —Å–≤—è–∑—ã–≤–∞–µ—Ç –ª–æ–≥–∏—á–µ—Å–∫–æ–µ –∏–º—è —Å —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏?" },
          { number: "3.5", text: "–ß—Ç–æ —Ö—Ä–∞–Ω–∏—Ç –∫–∞—Ç–∞–ª–æ–≥ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ (pg_attribute) –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω?" },
          { number: "3.6", text: "–ö–∞–∫ Catalog Manager —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Buffer Manager –∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–∞—Ç–∞–ª–æ–≥–æ–≤?" }
        ]
      },
      {
        id: "B",
        name: "–ë–ª–æ–∫ B ‚Äî –ü–∞—Ä—Å–∏–Ω–≥, –ø–ª–∞–Ω—ã, join‚Äô—ã, –∏–Ω–¥–µ–∫—Å—ã, –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä (–¢–µ–º—ã 4‚Äì9)",
        questions: [
          // –¢–µ–º–∞ 4. AST –∏ SQL Parsing
          {
